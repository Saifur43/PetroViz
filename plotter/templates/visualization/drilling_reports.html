{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'plotter/drilling_reports.css' %}">

<div class="container-fluid" style="padding-left: 5%;padding-right: 5%;">
    <div class="row">
        <main class="col-12 px-4 pt-3">
            {% if selected_well %}
            <div class="row g-2">
                <div class="col-lg-9 col-xl-9">
                    <div class="mb-3">
                        <h1 class="display-5 fw-bold">
                            {% for well in wells %}
                                {% if well.id|stringformat:'s' == selected_well %}
                                <h6 style="color: #257358; font-size: 1.5em;font-weight: 800;">
                                    <i class="bi bi-display me-2"></i>{{ well.name }} Drilling Reports
                                </h6>
                                {% endif %} 
                            {% endfor %}
                        </h1>
                    </div>
                    
                    <!-- Statistics Cards -->
                    {% include 'daily_reports/report_stats.html' %}
                    
                    <!-- Reports toolbar -->
                    <div class="reports-toolbar">
                        <button class="btn btn-sm btn-outline-secondary" id="btn-expand-all">
                            <i class="bi bi-arrows-expand"></i> Expand all
                        </button>
                        <button class="btn btn-sm btn-outline-secondary" id="btn-collapse-all">
                            <i class="bi bi-arrows-collapse"></i> Collapse all
                        </button>
                        <span class="filter-chip" id="prognosis-filter-chip">
                            <i class="bi bi-funnel"></i>
                            <span id="filter-label">Filtered</span>
                            <button class="btn-clear" id="btn-clear-filter" title="Clear filter">
                                <i class="bi bi-x-circle"></i>
                            </button>
                        </span>
                    </div>

                    <!-- Reports Cards -->
                    <div class="reports-container" id="reports-container">
                        {% for report in reports %}
                            {% include 'daily_reports/report_card.html' %}
                        {% empty %}
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle me-2"></i>No drilling reports found for this well.
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Prognosis Sidebar -->
                {% include 'daily_reports/prognosis_sidebar.html' %}
            </div>
            {% else %}
            <div class="text-center mt-5">
                <i class="bi bi-inbox" style="font-size: 3.5rem; color: #257358;"></i>
                <h3 class="mt-3" style="font-size: 1.3rem;">No well selected</h3>
                <p class="text-muted" style="font-size: 0.95rem;">
                    Please choose a well from the <a href="{% url 'drilling_reports_index' %}">wells list</a> to view drilling reports.
                </p>
            </div>
            {% endif %}
        </main>
    </div>
</div>

<script src="{% static 'plotter/drilling_reports.js' %}"></script>
{% include 'daily_reports/prognosis_script.html' %}
{% endblock %}